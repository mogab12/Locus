{% extends 'core/base.html' %}
{% load static %}

{% block title %}Detalhes do Evento - {{ evento.nome }}{% endblock %}

{% block content %}
{% block body %}
<style>
body {
    background-color: rgb(234, 234, 234);
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    overflow-x: hidden; 
}

html, body {
    width: 100%; 
}
.icon_event_location {
    position: absolute !important;
    top: 87vw !important; /* Ajusta a posição no topo */
    right: 14.8vw !important; /* Alinha ao lado do sininho */
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    cursor: pointer !important;
    text-decoration: none !important;
}
.icon_event_location i {
    font-size: 5.5vw !important;
    color: #000;
}
.icon_event_edit {
    position: absolute !important;
    top: 9.5vw !important;
    right: -10vw !important;
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    cursor: pointer !important;
    text-decoration: none !important;
    margin-top: 0!important;
}
.icon_event_delete{
    position: relative;
    top: -1vw !important;
    right: 4vw !important;

}


@media(min-width: 769px){
    .logo img{
        display: none;
    }
    .container {
        background-color: white;
        margin-top: -14vw;
        margin-bottom: min(20vw,150px);
        width: 50vw;
        border-radius: 2.5vw;
        box-shadow: 0 1vw 2vw rgba(0, 0, 0, 0.2);
        overflow: hidden;
        text-align: center;
        padding: 0;
        position: relative;
    }
    .icon_event {
        position: absolute !important;
        top: 1vw !important;
        right: 6vw !important;
        margin: 1vw !important;
        display: flex !important;
        gap: 1vw !important;
        justify-content: flex-end !important;
        font-size: 2vw !important;
    }
    .icon_event i{
        font-size: 3vw !important;
    }

    .header_event{
        z-index: 200;
        position: absolute;
        width: 100%;
        padding: 0;
    }

    .header_event button{
        width: 4vw;
        height: auto;
        box-shadow: 0 min(2vw,8px) min(3vw,11px) rgba(0, 0, 0, 0.2), 
                    0 min(1vw,4px) min(1.5vw,6px) rgba(0, 0, 0, 0.12);
    }
    .icon-btn{
        margin-left: auto;
        margin-right: min(5vw,60px) !important;
        margin-top: min(5vw,60px) !important;
    }
    .actions .icon-btn {
        display: flex;
        flex-direction: row;
        justify-content: center;
        background-color: #000;
        color: #fff;
        border: none;
        border-radius: 50%;
        width: min(40px, 8vw);
        height: min(40px, 8vw);
        font-size: min(18px, 4vw);
        cursor: pointer;
        text-decoration: none;
    }
    .icon-btn{
        position: fixed !important;
        top: 0px !important;
        right: 0px !important;
        z-index: 999 !important;
        background: #000 !important;
        color: #fff !important;
        border-radius: 50% !important;
        width: min(40px, 8vw) !important;
        height: min(40px, 8vw) !important;
        display: flex !important;
        justify-content: center !important;
        align-items: center !important;
        box-shadow: 0 min(2vw, 8px) min(3vw, 11px) rgba(0, 0, 0, 0.2), 
                    0 min(1vw, 4px) min(1.5vw, 6px) rgba(0, 0, 0, 0.12) !important;
        cursor: pointer !important;
        text-decoration: none !important;
    }

    .img_event{
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 0;
    }
    .img_event img{
        border: 2px solid transparent; 
        box-shadow: 0 0 0 min(3px,1vw) #ccc;
        width: 10vw !important; 
        height: 10vw !important; 
        border-radius: 50% !important; 
        margin-bottom: 0 !important;
        margin-left: -4vw !important;
        margin-top: 7vw !important;
    }

    .text_event{
        margin-top: 8vw !important;
    }

    .text_event p{
        text-align: left;
    }
    .text_event p, a{
        font-size: 1.5vw !important;
        margin-left: 2vw;
        margin-bottom: 1vw;
        margin-top: 0;
        margin-right: -5vw;
    }
    
    .description {
        margin-left: -4vw !important;
        margin-right: -4vw !important;
        margin-top: -8vw !important;
        margin-bottom: 4vw !important;
    }
    .description p{
        text-align: justify;
        font-size: 2vw !important;
    }

    .icon_event_edit {
        position: absolute !important;
        top: 2.3vw !important;
        right: -0.5vw !important;
        display: flex !important;
        justify-content: center !important;
        align-items: center !important;
        cursor: pointer !important;
        text-decoration: none !important;
        margin-top: -2.4vw !important;
    }

    .icon_event_delete {
        position: absolute !important;
        top: 2.2vw !important;
        right: 3.8vw !important;
        display: flex !important;
        justify-content: center !important;
        align-items: center !important;
        cursor: pointer !important;
        text-decoration: none !important;
        margin-right: 0vw !important;
        margin-top: -12.9vw !important;
    }

    .icon_event_delete i,
    .icon_event_edit i {
        font-size: 3vw !important;
        margin: 0 !important;
    }

    .icon_event_pin {
        position: absolute !important;
        top: 2vw !important;
        right: 4vw !important;
        display: flex !important;
        justify-content: center !important;
        align-items: center !important;
        cursor: pointer !important;
        text-decoration: none !important;
        font-size: 3vw !important;
    }
    .icon_event_location {
        position: absolute !important;
        top: 2.1vw !important; /* Ajusta a posição no topo */
        right: 10.5vw !important; /* Alinha ao lado do sininho */
        display: flex !important;
        justify-content: center !important;
        align-items: center !important;
        cursor: pointer !important;
        text-decoration: none !important;
    }
    .icon_event_location i {
        font-size: 2.8vw !important;
        color: #000;
    }
}

</style>
{% endblock %}
<div class="header_event">
    <div class="actions">
        <button class="icon-btn" onclick="history.back();" style="margin-left: auto; margin-right: 5vw; margin-top: 5vw;">
            <i class="fa fa-arrow-left"></i>
        </button>
    </div>
</div>

<div class="logo">
    {% if evento.imagem %}
    <img src="{{ evento.imagem.url }}" alt="{{ evento.nome }}" class="img-fluid" style=" z-index: -100;width: 100vw; height: auto;">
    {% else %}
    <img src="{% static 'event.webp' %}" alt="Imagem padrão do evento" class="img-fluid">
    {% endif %}
</div>
<div class="container" style="display: flex; flex-direction: column; align-items: flex-start; text-align: left; gap: 0;">
    <div class="icon_event">
        {% if request.user == evento.criado_por %}
        <a href="{% url 'editar_evento' evento.id %}" class="icon_event_edit">
            <i class="fa fa-edit" style="font-size: 6vw; color: rgb(0, 0, 0);"></i>
        </a>
        <form action="{% url 'deletar_evento' evento.id %}" method="post" style="display:inline;" class="icon_event_delete">
            {% csrf_token %}
            <button type="submit" class="tab" style="background: none; border: none; cursor: pointer; padding: 0; margin-top: 10.6vw;">
                <i class="fa fa-trash" style="font-size: 6vw; color: rgb(0, 0, 0);"></i>
            </button>
        </form>
        {% else %}
        <form action="{% url 'toggle_interesse' evento.id %}" method="post" style="display: inline;">
            {% csrf_token %}
            <button type="submit" style="background: none; border: none; cursor: pointer; padding: 0; margin-bottom: 9.1vw; text-align: right; margin-left: 5.5vw;">
                {% if user in evento.interessados.all %}
                    <i class="fa fa-bell" style="font-size: 6vw; color: rgb(0, 0, 0);"></i>
                {% else %}
                    <i class="fa fa-bell" style="font-size: 6vw; color: rgb(182, 182, 182);"></i>
                {% endif %}
            </button>
        </form>
        {% endif %}
    </div>  
    
    <div class="event_main_container" style="margin-bottom: 6vw;">
        <div class="img_event">
            {% if evento.criado_por.foto %}
                <img src="{{ evento.criado_por.foto.url }}"  class="ent_img" style="width: 20vw; height: 20vw; border-radius: 50%; margin-bottom: 0">
            {% else %}
                <img src="{% static 'defaultphoto.jpg' %}" class="ent_img_default" >
            {% endif %}
        </div>
        <div class="text_event">
            <p class="p_event" style="color: black; font-weight: bold; font-size: 4vw;">{{ evento.nome }}</p>
            <p class="p_event">Início: {{ evento.data_inicio }}</p>
            <p class="p_event">Fim: {{ evento.data_fim }}</p>
            <p class="p_event">Local: {{ evento.local }}</p>
            <p class="p_event">Organizado por:
                <a href="{% url 'view_profile' evento.criado_por.id %}" class="tab" style="font-size: 3vw; font-weight: normal; text-decoration: underline;">{{ evento.criado_por.get_full_name }}</a>
            </p>
        </div>
    </div>
    <div class="description" style="display: flex; flex-direction: column; text-align: center; justify-content: space-between; margin-bottom: 10vh;">
        <p class="p_event" style="margin-top: 4vw; color: black; font-size: 3.5vw; margin-left: 10vw;"><strong>Descrição do evento:</strong></p>
        <p style="margin-top: 2vw; color: grey; margin-left: 10vw; font-size: 3.5vw; margin-right: 10vw;">{{ evento.descricao }}</p>
    </div>
    {% if evento.latitude and evento.longitude %}
    <a href="{% url 'ver_local_evento' evento.id %}" class="icon_event_location">
        <i class="fa fa-map-marker-alt"></i>
    </a>
    {% endif %}
</div>

{% endblock %}